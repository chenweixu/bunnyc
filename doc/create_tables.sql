CREATE TABLE `t_host_cpu` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `ctime` DATETIME NOT NULL COMMENT '采集时间',
    `itime` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '入库时间',
    `ip` VARCHAR(20) NOT NULL DEFAULT 0 COMMENT '主机地址',
    `cpu` FLOAT(5,2) NOT NULL  COMMENT 'CPU使用率',
    `cpu_user_rate` FLOAT(5,2) NOT NULL,
    `cpu_nice_rate` FLOAT(5,2) NOT NULL,
    `cpu_system_rate` FLOAT(5,2) NOT NULL,
    `cpu_idle_rate` FLOAT(5,2) NOT NULL,
    `cpu_iowait_rate` FLOAT(5,2) NOT NULL,
    `cpu_irq_rate` FLOAT(5,2) NOT NULL,
    `cpu_softirq_rate` FLOAT(5,2) NOT NULL,
    `ld_1` FLOAT(5,2) NOT NULL COMMENT '1分钟负载',
    `ld_2` FLOAT(5,2) NOT NULL COMMENT '5分钟负载',
    `ld_3` FLOAT(5,2) NOT NULL COMMENT '15分钟负载',
    `proc_run` SMALLINT(5) UNSIGNED NOT NULL,
    `proc_sub` MEDIUMINT(8) UNSIGNED NOT NULL,
    INDEX `IDX_HOST_CPU_CTIME` (`ctime`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;

CREATE TABLE `t_host_ram` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `ctime` DATETIME NOT NULL,
    `itime` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `ip` VARCHAR(20) NOT NULL DEFAULT 0,
    `mem` TINYINT(3) UNSIGNED NOT NULL DEFAULT 0,
    `swap` TINYINT(3) UNSIGNED NOT NULL DEFAULT 0,
    INDEX `IDX_HOST_RAM_CTIME` (`ctime`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;


CREATE TABLE t_memcached(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `mcid` SMALLINT UNSIGNED NOT NULL,
    `mcport` SMALLINT UNSIGNED NOT NULL,
    `ctime` DATETIME NOT NULL,
    `itime` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `ip` VARCHAR(20) NOT NULL DEFAULT 0,
    `memsum` BIGINT UNSIGNED NOT NULL,
    `memused` BIGINT UNSIGNED NOT NULL,
    `cmd_get` BIGINT UNSIGNED NOT NULL,
    `cmd_set` BIGINT UNSIGNED NOT NULL,
    `get_hits` BIGINT UNSIGNED NOT NULL,
    `curr_connections` SMALLINT UNSIGNED NOT NULL,
    `total_connections` INT UNSIGNED NOT NULL,
    INDEX `IDX_MEMCACHED_CTIME` (`ctime`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;
